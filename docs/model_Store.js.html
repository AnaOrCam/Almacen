<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model/Store.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model/Store.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {Product} from "./Product.js";

export class Store{

    /**
     * Constructor de la clase Tienda
     * @constructor
     * @param {string} id - Id de la Tienda
     */
    constructor(id){
        this.id=id;
        this.products=[];
    }

    /**
     * Busca un producto en la lista por su id.
     * @param {string} cod - Id del producto a buscar.
     * @returns {Product|undefined} Devuelve el producto encontrado o undefined si no existe.
     */
    findProduct(cod){
        let auxProduct;
        this.products.forEach(product => {if (product.getId==cod) auxProduct=product});
        return auxProduct;
    }

    /**
     * Añade un nuevo producto a la lista si no existe previamente.
     * @param {string} id - Id del producto.
     * @param {string} name - Nombre del producto.
     * @param {number} price - Precio unitario del producto.
     * @param {number} units - Número de unidades iniciales.
     * @returns {Product|boolean} Devuelve el producto creado o false si ya existía.
     */
    addProduct(id, name, price, units){
        if(this.findProduct(id)==undefined){
            let prodAux=new Product(id, name, price, units);
            this.products.push(prodAux);
            return prodAux;
        }
        return false;
    }

    /**
     * Elimina un producto de la lista si existe, tiene 0 unidades y el usuario lo confirma.
     * @param {string} cod - Id del producto.
     * @returns {boolean} - Devuelve true si el producto se elimina correctamente, false en caso contrario.
     */
    delProduct(cod){
        for (let i = 0; i &lt; this.products.length; i++) {
            if (this.products[i].id==cod &amp;&amp; this.products[i].units==0){
                if(confirm("¿Seguro que quieres borrar este producto?")){
                this.products.splice(i,1);
                return true;
                }
            }  
        }
        return false;
    }

    /**
     * Modifica las unidades de un producto sumando o restando una unidad.
     * @param {string} cod - Id del producto.
     * @param {string} sign - Indica la operación a realizar: 'plus' para sumar o 'minus' para restar.
     * @returns {Product|undefined} Devuelve el producto modificado o undefined si no se encuentra.
     */
    changeProductUnits(cod,sign){
        let productChanged;
        this.products.forEach(product => {
            if (product.getId==cod) {
                if(sign=='plus'){
                    product.plusUnits();
                    productChanged= product;
                }else if(sign=='minus'){
                    product.minusUnits();
                    productChanged= product;
                }
            }
        })
        return productChanged;
    }

    /**
     * Edita los datos de un producto existente si su valor es diferente al actual.
     * @param {string} id - Id del producto.
     * @param {string} name - Nuevo nombre del producto.
     * @param {number} price - Nuevo precio del producto.
     * @param {number} units - Nuevo número de unidades.
     * @returns {Product|boolean} Devuelve el producto editado o false si el producto no existe.
     */
    editProduct(id,name,price,units){
        let auxProduct=this.findProduct(id);
        if(auxProduct!=undefined){
            if(name!=auxProduct.getName){
                this.products.forEach(product => {if (product.id==id) product.setName=name});
            }
            if(price!=auxProduct.getPrice){
                this.products.forEach(product => {if (product.id==id) product.setPrice=price});
            }
            if(units!=auxProduct.getUnits){
                this.products.forEach(product => {if (product.id==id) product.setUnits=units});
            }
            return auxProduct;
        }else{
            return false;
        }
    }

    /**
     * Calcula el importe total de todos los productos.
     * @returns {string} - Importe total con dos decimales.
     */
    totalImport(){
        return this.products.reduce((total,product)=>(total+=product.productImport()),0).toFixed(2);
    }

    /**
     * Devuelve los productos con unidades por debajo del valor pasado por parámetro.
     * @param {number} units - Límite de unidades.
     * @returns {Product[]} - Array de productos con stock inferior al indicado.
     */
    underStock(units){
        return this.products.filter(obj=>obj.units&lt;units);
    }

    /**
     * Ordena los productos de mayor a menor número de unidades.
     * @returns {Product[]} - Array de productos ordenado.
     */
    orderByUnits(){
        return this.products.sort((o1,o2)=>o2.units-o1.units);
    }

    /**
     * Ordena los productos alfabéticamente por nombre.
     * @returns {Product[]} - Array de productos ordenado.
     */
    orderByName(){
        return this.products.sort((o1,o2)=>o1.name.localeCompare(o2.name));
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Controller.html">Controller</a></li><li><a href="Product.html">Product</a></li><li><a href="Store_Store.html">Store</a></li><li><a href="View.html">View</a></li></ul><h3>Global</h3><ul><li><a href="global.html#init">init</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Dec 15 2025 18:18:28 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
