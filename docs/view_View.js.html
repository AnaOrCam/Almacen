<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: view/View.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: view/View.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * Clase para construir objetos de tipo Controller
 * @example
 * let b= new View();
 * console.log(b);
 * 
 * @see https://jsdoc.app/
 */


export class View{

    /**
     * Constructor de la clase Vista.
     * @constructor
     */
    constructor(){
        this.tabla=document.getElementById('table').children[1];
        this.msg=document.getElementById("messages");
        this.total=document.getElementById("total");
    }

    /**
     * Muestra en la tabla los productos recibidos.
     * @param {Product[]} array - Array de productos a mostrar.
     */
    async renderNewProduct(array){ 
        array.forEach(product => {
            
        let ultimaFila=this.tabla.insertRow();
        let colId=ultimaFila.insertCell();
        colId.classList.add('idTable')
        colId.textContent=product.getId;
        let colName=ultimaFila.insertCell();
        colName.textContent=product.getName;
        let colUds=ultimaFila.insertCell();
        colUds.classList.add('idUds')
        colUds.textContent=product.getUnits;
        let colPrice=ultimaFila.insertCell();
        colPrice.textContent=product.getPrice;
        let colImport=ultimaFila.insertCell();
        colImport.textContent=product.productImport();
        let colActions=ultimaFila.insertCell();
        let div=document.createElement('div');
        div.innerHTML='&lt;button>&lt;i name="up" class="bi bi-caret-up">&lt;/i>&lt;/button>'+
                    '&lt;button>&lt;i name="down" class="bi bi-caret-down">&lt;/i>&lt;/button>'+
                    '&lt;button>&lt;i name="pen" class="bi bi-pencil-fill">&lt;/i>&lt;/button>'+
                    '&lt;button>&lt;i name="x" class="bi bi-x-lg">&lt;/i>&lt;/button>'
        colActions.append(div);
        div.classList.add('opciones');
        });
    }

    /**
     * Elimina un producto de la tabla.
     * @param {string} id - Id del producto a eliminar.
     * @returns {boolean} - Devuelve true si el producto existía y se ha eliminado, false en caso contrario.
     */
    renderDelProduct(id){
        let products=this.tabla.children;
        let productExists=false;
        for (let i = 0; i &lt; products.length; i++) {
            if (products[i].children[0].textContent==id){ 
                products[i].remove();
                productExists=true;
            }
        }
        return productExists;
    }

    /**
     * Actualiza las unidades y el importe de un producto en la tabla.
     * @param {Product} product - Producto con los nuevos datos de stock.
     * @returns {boolean} - Devuelve true si el producto existe y, por lo tanto se ha actualizado, false en caso contrario.
     */
    renderChangeStock(product){
        let products=this.tabla.children;
        let productExists=false;
        for (let i = 0; i &lt; products.length; i++) {
            if (products[i].children[0].textContent==product.getId){
                productExists=true;
                let actualizeUnits=products[i].children[2];
                let actualizeImport=products[i].children[4];
                products[i].replaceChild(this.createElementWithText('td',product.getUnits),actualizeUnits);
                products[i].replaceChild(this.createElementWithText('td',product.productImport()),actualizeImport);
            } 
        }
        return productExists;
    }

    /**
     * Actualiza los datos de un producto en la tabla.
     * @param {Product} product - Producto con los nuevos datos.
     * @returns {boolean} Devuelve true si el producto existe y, por lo tanto se ha actualizado, false en caso contrario.
     */
    renderEditProduct(product){
        let products=this.tabla.children;
        let productExists=false;
        for (let i = 0; i &lt; products.length; i++) {
            if (products[i].children[0].textContent==product.getId){
                productExists=true;
                products[i].children[1].textContent=product.getName;
                products[i].children[2].textContent=product.getUnits;
                products[i].children[3].textContent=product.getPrice;
                products[i].children[4].textContent=product.productImport();

            } 
        }
        return productExists;
    }

    /**
     * Muestra el importe total de la tienda.
     * @param {number} num - Valor total a mostrar.
     */
    renderStoreImport(num){
        let strong=this.createElementWithText('strong','TOTAL: ')
        strong.append(num+'€');
        let totalAReemplazar=document.getElementById('total').firstChild;
        this.total.replaceChild(strong, totalAReemplazar);
    }

    /**
     * Muestra un mensaje de error en la interfaz.
     * @param {string} text - Mensaje de error a mostrar.
     */
    renderErrorMessage(text){
        let divError=this.createElementWithText('div',text);
        let xCell=this.createElementWithText('button',"x");
        xCell.classList.add('close');
        divError.classList.add('error');
        divError.append(xCell);
        this.msg.append(divError);
        xCell.addEventListener('click',()=> divError.remove())
    }

    /**
     * Crea un elemento HTML con el texto pasado por parámetro.
     * @param {string} element - Etiqueta HTML a crear.
     * @param {string} text - Texto o valor a insertar en el elemento.
     * @returns {HTMLElement} Elemento HTML creado.
     */
    createElementWithText(element, text){
        let newElement=document.createElement(element);
        newElement.textContent=text;
        return newElement;
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Controller.html">Controller</a></li><li><a href="Product.html">Product</a></li><li><a href="Store_Store.html">Store</a></li><li><a href="View.html">View</a></li></ul><h3>Global</h3><ul><li><a href="global.html#init">init</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Dec 15 2025 18:18:28 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
